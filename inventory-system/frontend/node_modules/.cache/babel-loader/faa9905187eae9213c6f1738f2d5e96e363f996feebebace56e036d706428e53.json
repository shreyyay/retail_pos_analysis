{"ast":null,"code":"var _jsxFileName = \"/media/sda5/retail_pos_analysis/inventory-system/frontend/src/components/InvoiceUpload.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef } from 'react';\nimport { uploadInvoice } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dropZoneStyle = {\n  border: '2px dashed #b0c4de',\n  borderRadius: 12,\n  padding: 48,\n  textAlign: 'center',\n  cursor: 'pointer',\n  background: '#f8fafc',\n  transition: 'border-color 0.2s'\n};\nconst dropZoneActiveStyle = {\n  ...dropZoneStyle,\n  borderColor: '#1e3a5f',\n  background: '#e8f0fe'\n};\nfunction InvoiceUpload({\n  onExtracted\n}) {\n  _s();\n  const [dragging, setDragging] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const fileInput = useRef(null);\n  const handleFile = async file => {\n    if (!file) return;\n    setLoading(true);\n    setError('');\n    try {\n      const res = await uploadInvoice(file);\n      if (res.data.success) {\n        onExtracted(res.data.data);\n      } else {\n        setError(res.data.message || 'Extraction failed');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.detail) || err.message || 'Upload failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const onDrop = e => {\n    e.preventDefault();\n    setDragging(false);\n    const file = e.dataTransfer.files[0];\n    handleFile(file);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: dragging ? dropZoneActiveStyle : dropZoneStyle,\n      onDragOver: e => {\n        e.preventDefault();\n        setDragging(true);\n      },\n      onDragLeave: () => setDragging(false),\n      onDrop: onDrop,\n      onClick: () => {\n        var _fileInput$current;\n        return (_fileInput$current = fileInput.current) === null || _fileInput$current === void 0 ? void 0 : _fileInput$current.click();\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: fileInput,\n        type: \"file\",\n        accept: \"image/*,application/pdf\",\n        style: {\n          display: 'none'\n        },\n        onChange: e => handleFile(e.target.files[0])\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 24,\n            marginBottom: 8\n          },\n          children: \"Processing...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#666'\n          },\n          children: \"Extracting invoice data with OCR + AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 36,\n            marginBottom: 8\n          },\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 16,\n            fontWeight: 500\n          },\n          children: \"Drop supplier invoice here or click to upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: '#888',\n            marginTop: 8,\n            fontSize: 13\n          },\n          children: \"Supports JPEG, PNG, WebP, PDF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#d32f2f',\n        marginTop: 12,\n        padding: 12,\n        background: '#ffeaea',\n        borderRadius: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(InvoiceUpload, \"q9+i/0GTnsucD068jvfuYIO4lQc=\");\n_c = InvoiceUpload;\nexport default InvoiceUpload;\nvar _c;\n$RefreshReg$(_c, \"InvoiceUpload\");","map":{"version":3,"names":["React","useState","useRef","uploadInvoice","jsxDEV","_jsxDEV","dropZoneStyle","border","borderRadius","padding","textAlign","cursor","background","transition","dropZoneActiveStyle","borderColor","InvoiceUpload","onExtracted","_s","dragging","setDragging","loading","setLoading","error","setError","fileInput","handleFile","file","res","data","success","message","err","_err$response","_err$response$data","response","detail","onDrop","e","preventDefault","dataTransfer","files","children","style","onDragOver","onDragLeave","onClick","_fileInput$current","current","click","ref","type","accept","display","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","fontSize","marginBottom","color","fontWeight","marginTop","_c","$RefreshReg$"],"sources":["/media/sda5/retail_pos_analysis/inventory-system/frontend/src/components/InvoiceUpload.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { uploadInvoice } from '../services/api';\n\nconst dropZoneStyle = {\n  border: '2px dashed #b0c4de',\n  borderRadius: 12,\n  padding: 48,\n  textAlign: 'center',\n  cursor: 'pointer',\n  background: '#f8fafc',\n  transition: 'border-color 0.2s',\n};\n\nconst dropZoneActiveStyle = {\n  ...dropZoneStyle,\n  borderColor: '#1e3a5f',\n  background: '#e8f0fe',\n};\n\nfunction InvoiceUpload({ onExtracted }) {\n  const [dragging, setDragging] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const fileInput = useRef(null);\n\n  const handleFile = async (file) => {\n    if (!file) return;\n    setLoading(true);\n    setError('');\n    try {\n      const res = await uploadInvoice(file);\n      if (res.data.success) {\n        onExtracted(res.data.data);\n      } else {\n        setError(res.data.message || 'Extraction failed');\n      }\n    } catch (err) {\n      setError(err.response?.data?.detail || err.message || 'Upload failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onDrop = (e) => {\n    e.preventDefault();\n    setDragging(false);\n    const file = e.dataTransfer.files[0];\n    handleFile(file);\n  };\n\n  return (\n    <div>\n      <div\n        style={dragging ? dropZoneActiveStyle : dropZoneStyle}\n        onDragOver={(e) => { e.preventDefault(); setDragging(true); }}\n        onDragLeave={() => setDragging(false)}\n        onDrop={onDrop}\n        onClick={() => fileInput.current?.click()}\n      >\n        <input\n          ref={fileInput}\n          type=\"file\"\n          accept=\"image/*,application/pdf\"\n          style={{ display: 'none' }}\n          onChange={(e) => handleFile(e.target.files[0])}\n        />\n        {loading ? (\n          <div>\n            <div style={{ fontSize: 24, marginBottom: 8 }}>Processing...</div>\n            <div style={{ color: '#666' }}>Extracting invoice data with OCR + AI</div>\n          </div>\n        ) : (\n          <div>\n            <div style={{ fontSize: 36, marginBottom: 8 }}>+</div>\n            <div style={{ fontSize: 16, fontWeight: 500 }}>\n              Drop supplier invoice here or click to upload\n            </div>\n            <div style={{ color: '#888', marginTop: 8, fontSize: 13 }}>\n              Supports JPEG, PNG, WebP, PDF\n            </div>\n          </div>\n        )}\n      </div>\n      {error && (\n        <div style={{ color: '#d32f2f', marginTop: 12, padding: 12, background: '#ffeaea', borderRadius: 8 }}>\n          {error}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default InvoiceUpload;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}